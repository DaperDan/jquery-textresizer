/*
jQuery Text Resizer Plugin v1.1.0
    
Copyright (c) 2009-2013 Mario J Vargas
See the file MIT-LICENSE.txt for copying permission.
    
Website: http://angstrey.com/
Documentation: http://angstrey.com/index.php/projects/jquery-text-resizer-plugin/
*/(function(e){"use strict";var t,n;n=function(e){if(window.console&&"function"==typeof window.console.log){var t;if("string"==typeof e)console.log("jquery.textresizer => "+e);else{console.log("jquery.textresizer => {");for(t in e)e.hasOwnProperty(t)&&console.log("    "+t+": "+e[t]);console.log("}")}}},t=function(e,n){this.$elements=e,this.settings=n||t.defaults},t.defaults={debugMode:!1,type:"fontSize",target:"body",selectedIndex:-1,suppressClickThrough:!0},t.prototype.buildDefaultFontSizes=function(e){if(0===e)return;var t=8,r=[],i,s;this.settings.debugMode&&n("In buildDefaultFontSizes: numElms = "+e);if(this.settings.debugMode)for(i=0;i<e;i+=1)s=(t+i*2)/10,r.push(s+"em"),n("In buildDefaultFontSizes: mySizes["+i+"] = "+r[i]);else for(i=0;i<e;i+=1)s=(t+i*2)/10,r.push(s+"em");return r},t.prototype.serializeHash=function(t){return e.param(t).replace(/\+/g,"%20")},t.prototype.deserializeHash=function(e){var t,n,r,i={},s=/\&|\|/g,o=e.split(s);for(t=0,n=o.length;t<n;t+=1)r=o[t].split("="),i[r[0]]=window.decodeURIComponent(r[1]);return i},t.prototype.buildCookieID=function(e,t,n){return"JQUERY.TEXTRESIZER["+e+","+t+"]."+n},t.prototype.getCookie=function(t,n,r){var i=this.buildCookieID(t,n,r),s=e.cookie(i);return e.cookie(i+".valueType")==="dict"&&s?this.deserializeHash(s):s},t.prototype.setCookie=function(t,r,i,s){var o=this.buildCookieID(t,r,i),u={expires:365,path:"/"},a;"object"==typeof s?(e.cookie(o+".valueType","dict",u),a=this.serializeHash(s),e.cookie(o,a,u),this.settings.debugMode&&n("In setCookie: Cookie: "+o+": "+a)):(e.cookie(o,s,u),this.settings.debugMode&&n("In setCookie: Cookie (not hash): "+o+": "+s))},t.prototype.applyInlineCssProperties=function(e,t){e.css(t)},t.prototype.applyCssClass=function(t,n,r){e.each(r,function(){var n=this.toString();t.each(function(){var t=e(this);t.hasClass(n)&&t.removeClass(n)})}),t.addClass(n)},t.prototype.applySpecificFontSize=function(e,t){e.css("font-size",t)},t.prototype.applyFontSize=function(t,r){this.settings.debugMode&&n(["target: "+r.target,"newSize: "+t,"type: "+r.type].join(", "));var i=e(r.target);switch(r.type){case"css":this.applyInlineCssProperties(i,t);break;case"cssClass":this.applyCssClass(i,t,r.sizes);break;default:this.applySpecificFontSize(i,t)}},t.prototype.loadPreviousState=function(t){if(e.cookie){this.settings.debugMode&&n("In loadPreviousState(): jquery.cookie: INSTALLED");var r=this.getCookie(t.selector,t.target,"selectedIndex"),i=parseInt(r,10),s=this.getCookie(t.selector,t.target,"size");isNaN(i)||(t.selectedIndex=i),this.settings.debugMode&&(n("In loadPreviousState: selectedIndex: "+i+"; type: "+typeof i),n("In loadPreviousState: prevSize: "+s+"; type: "+typeof s)),s&&this.applyFontSize(s,t)}else this.settings.debugMode&&n("In loadPreviousState(): jquery.cookie: NOT INSTALLED")},t.prototype.markActive=function(t,n){e(n.selector).removeClass("textresizer-active"),e(t).addClass("textresizer-active")},t.prototype.saveState=function(t,r){e.cookie?(this.settings.debugMode&&n("In saveState(): jquery.cookie: INSTALLED"),this.setCookie(r.selector,r.target,"size",t),this.setCookie(r.selector,r.target,"selectedIndex",r.selectedIndex)):this.settings.debugMode&&n("In saveState(): jquery.cookie: NOT INSTALLED")},t.prototype.attachResizerToElement=function(t,n,r){var i=this,s=e(t),o=r.sizes[n];n===r.selectedIndex&&s.addClass("textresizer-active"),s.on("click",{index:n},function(e){r.suppressClickThrough&&e.preventDefault(),r.selectedIndex=e.data.index,i.applyFontSize(o,r),i.saveState(o,r),i.markActive(this,r)})},t.prototype.init=function(){var r=this,i=r.$elements.size(),s,o=t.defaults.debugMode;o&&n("jquery.textresizer => selection count: "+i);if(0===i)return;r.settings=e.extend({selector:r.$elements.selector,sizes:this.buildDefaultFontSizes(i)},e.fn.textresizer.defaults,r.settings),s=r.settings,o=s.debugMode,o&&n(s);if(i>s.sizes.length){o&&n("ERROR: Number of defined sizes incompatible with number of buttons => elements: "+i+"; defined sizes: "+s.sizes.length+"; target: "+s.target);return}return r.loadPreviousState(s),r},e.fn.textresizer=function(e){var n=(new t(this,e)).init();return this.each(function(e){n.attachResizerToElement(this,e,n.settings)})},e.fn.textresizer.defaults=t.defaults})(window.jQuery);